"use strict";(self["webpackChunkpersonal_website_frontend"]=self["webpackChunkpersonal_website_frontend"]||[]).push([[410],{3020:function(e,t,n){n.d(t,{A:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{class:{"alerts-outer-floating":e.floating}},e._l(e.alerts,function(n,o){return t("v-alert",{key:o,attrs:{elevation:"7",type:n.type},on:{click:function(t){return e.$delete(e.alerts,o)}}},[e._v(" "+e._s(n.text)+" ")])}),1)},r=[],a={name:"Notifications",props:["alerts","floating"]},i=a,l=n(845),s=(0,l.A)(i,o,r,!1,null,null,null),c=s.exports},3418:function(e,t,n){var o=n(6518),r=n(7916),a=n(4428),i=!a(function(e){Array.from(e)});o({target:"Array",stat:!0,forced:i},{from:r})},4410:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});n(3418),n(7764);var o=function(){var e=this,t=e._self._c;return t("v-container",[t("h2",[e._v("Contact page admin zone")]),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",md:"6"}},[t("Notifications",{attrs:{alerts:e.alerts}})],1),t("v-col",{attrs:{cols:"12",md:"6"}},[e.markForDeletionArr.length?t("v-card",{attrs:{outlined:""}},[t("v-card-text",[e._v(" Marked "+e._s(e.markForDeletionArr.length)+" items    "),t("v-btn",{on:{click:function(t){return e.clearSelection()}}},[e._v(" Cancel ")]),e._v("    "),t("v-btn",{attrs:{color:"error",disabled:!!e.restCallsGoing},on:{click:function(t){return e.deleteSelected()}}},[e._v(" Delete ")])],1)],1):e._e()],1)],1),t("v-data-table",{attrs:{dense:"","disable-filtering":!0,"disable-sort":!0,headers:e.headers,items:e.data,"item-class":e.itemClass,page:e.page,"items-per-page":e.itemsPerPage,"footer-props":{itemsPerPageOptions:[7,21,49]},"server-items-length":e.totalItems,loading:!!e.restCallsGoing},on:{"update:page":function(t){e.page=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}},scopedSlots:e._u([{key:"item.viewIcon",fn:function(n){var o=n.item;return[t("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.overlayId=o.effectiveId}}},[e._v(" mdi-eye ")])]}},{key:"item.fileName",fn:function(n){var o=n.item;return[o.fileName?t("a",{attrs:{href:e.computeDownloadHref(o.effectiveId),download:""}},[e._v(e._s(o.fileName))]):e._e()]}},{key:"item.deleteIcon",fn:function(n){var o=n.item;return[e.markForDeletionArr.indexOf(o.effectiveId)>-1?t("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.markForDeletionSet.delete(o.effectiveId),e.markForDeletionArr=Array.from(e.markForDeletionSet)}}},[e._v(" mdi-refresh ")]):t("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.markForDeletionSet.add(o.effectiveId),e.markForDeletionArr=Array.from(e.markForDeletionSet)}}},[e._v(" mdi-trash-can ")])]}}])}),t("v-overlay",{attrs:{opacity:"0.975",value:!!e.overlayId}},[e.overlayContent?t("div",{staticStyle:{overflow:"auto","max-height":"95vh"}},[e.overlayContent.title?t("h3",[e._v(e._s(e.overlayContent.title))]):t("h3",[e._v("(No Title)")]),t("p",{staticStyle:{opacity:"0.5"}},[e._v(e._s(e.overlayContent.effectiveId))]),t("v-textarea",{attrs:{"auto-grow":"",readonly:!0,outlined:""},model:{value:e.overlayContent.content,callback:function(t){e.$set(e.overlayContent,"content",t)},expression:"overlayContent.content"}}),e.overlayContent.fileName?t("a",{attrs:{href:e.computeDownloadHref(e.overlayContent.effectiveId)}},[e._v(" "+e._s(e.overlayContent.fileName)+" ("+e._s(e.overlayContent.fileSize)+"B)")]):e._e(),t("p",{staticStyle:{opacity:"0.75"}},[e._v("Submitted "+e._s(e.overlayContent.created)+" by "+e._s(e.overlayContent.submitter)+" via "+e._s(e.overlayContent.receivedFrom))])],1):t("h3",[e._v("Loading "+e._s(e.overlayId)+"...")]),t("v-btn",{on:{click:function(t){e.overlayId=null}}},[e._v("Close")])],1)],1)},r=[],a=(n(8598),n(2062),n(8111),n(1701),n(6099),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(2953),n(7635),n(7963)),i=n(3020),l={components:{Notifications:i.A},mixins:[a.A],data:function(){return{data:[],totalItems:0,headers:[{text:"",value:"viewIcon"},{text:"Title",value:"title"},{text:"Content",value:"content"},{text:"File Name",value:"fileName"},{text:"File Size",value:"fileSize"},{text:"Created",value:"created"},{text:"Submitter",value:"submitter"},{text:"Received From",value:"receivedFrom"},{text:"",value:"deleteIcon"}],page:1,itemsPerPage:7,markForDeletionSet:new Set,markForDeletionArr:[],overlayId:null,overlayContent:null}},watch:{itemsPerPage:function(){this.loadContactMessages()},page:function(){this.loadContactMessages()},overlayId:function(){var e=this;this.overlayId?this.credentialedAxios("loading full contact message",function(t){return t.get(e.$apiUrl+"/contact-admin/full/"+e.overlayId)},function(t){return e.overlayContent=t}):this.overlayContent=null}},methods:{countContactMessages:function(){var e=this;this.credentialedAxios("counting contact messages",function(t){return t.get(e.$apiUrl+"/contact-admin/count")},function(t){return e.totalItems=t})},loadContactMessages:function(){var e=this;this.credentialedAxios("loading contact messages",function(t){return t.get(e.$apiUrl+"/contact-admin?page="+e.page+"&size="+e.itemsPerPage)},function(t){return e.data=t})},computeDownloadHref:function(e){return this.$apiUrl+"/contact-admin/download/"+e},itemClass:function(e){return this.markForDeletionSet.has(e.effectiveId)?"markedForDeletion":""},clearSelection:function(){this.markForDeletionSet=new Set,this.markForDeletionArr=[]},deleteSelected:function(){var e=this;console.log("Sending for deletion",this.markForDeletionArr),this.credentialedAxios("deleting contact messages",function(t){return t.delete(e.$apiUrl+"/contact-admin?"+e.markForDeletionArr.map(function(e){return"effectiveId="+encodeURIComponent(e)}).join("&"))},function(){e.clearSelection(),e.countContactMessages(),e.loadContactMessages()})}},mounted:function(){this.countContactMessages(),this.loadContactMessages()}},s=l,c=n(845),u=(0,c.A)(s,o,r,!1,null,null,null),d=u.exports},7916:function(e,t,n){var o=n(6080),r=n(9565),a=n(8981),i=n(6319),l=n(4209),s=n(3517),c=n(6198),u=n(4659),d=n(81),v=n(851),f=Array;e.exports=function(e){var t=a(e),n=s(this),m=arguments.length,g=m>1?arguments[1]:void 0,p=void 0!==g;p&&(g=o(g,m>2?arguments[2]:void 0));var h,y,_,C,k,S,I=v(t),x=0;if(!I||this===f&&l(I))for(h=c(t),y=n?new this(h):f(h);h>x;x++)S=p?g(t[x],x):t[x],u(y,x,S);else for(y=n?new this:[],C=d(t,I),k=C.next;!(_=r(k,C)).done;x++)S=p?i(C,g,[_.value,x],!0):_.value,u(y,x,S);return y.length=x,y}},8598:function(e,t,n){var o=n(6518),r=n(9504),a=n(7055),i=n(5397),l=n(4598),s=r([].join),c=a!==Object,u=c||!l("join",",");o({target:"Array",proto:!0,forced:u},{join:function(e){return s(i(this),void 0===e?",":e)}})}}]);
//# sourceMappingURL=410-legacy.c2eacb8e.js.map