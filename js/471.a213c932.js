"use strict";(self["webpackChunkpersonal_website_frontend"]=self["webpackChunkpersonal_website_frontend"]||[]).push([[471],{397:function(t,e,n){var o=n(7751);t.exports=o("document","documentElement")},679:function(t,e,n){var o=n(1625),r=TypeError;t.exports=function(t,e){if(o(e,t))return t;throw new r("Incorrect invocation")}},1072:function(t,e,n){var o=n(1828),r=n(8727);t.exports=Object.keys||function(t){return o(t,r)}},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},2106:function(t,e,n){var o=n(283),r=n(4913);t.exports=function(t,e,n){return n.get&&o(n.get,e,{getter:!0}),n.set&&o(n.set,e,{setter:!0}),r.f(t,e,n)}},2127:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var o=function(){var t=this,e=t._self._c;return e("v-container",[e("h2",[t._v("Contact page admin zone")]),e("v-row",{attrs:{dense:""}},[e("v-col",{attrs:{cols:"12",md:"6"}},[e("Notifications",{attrs:{alerts:t.alerts}})],1),e("v-col",{attrs:{cols:"12",md:"6"}},[t.markForDeletionArr.length?e("v-card",{attrs:{outlined:""}},[e("v-card-text",[t._v(" Marked "+t._s(t.markForDeletionArr.length)+" items    "),e("v-btn",{on:{click:function(e){return t.clearSelection()}}},[t._v(" Cancel ")]),t._v("    "),e("v-btn",{attrs:{color:"error",disabled:!!t.restCallsGoing},on:{click:function(e){return t.deleteSelected()}}},[t._v(" Delete ")])],1)],1):t._e()],1)],1),e("v-data-table",{attrs:{dense:"","disable-filtering":!0,"disable-sort":!0,headers:t.headers,items:t.data,"item-class":t.itemClass,page:t.page,"items-per-page":t.itemsPerPage,"footer-props":{itemsPerPageOptions:[7,21,49]},"server-items-length":t.totalItems,loading:!!t.restCallsGoing},on:{"update:page":function(e){t.page=e},"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"item.viewIcon",fn:function({item:n}){return[e("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.overlayId=n.effectiveId}}},[t._v(" mdi-eye ")])]}},{key:"item.fileName",fn:function({item:n}){return[n.fileName?e("a",{attrs:{href:t.computeDownloadHref(n.effectiveId),download:""}},[t._v(t._s(n.fileName))]):t._e()]}},{key:"item.deleteIcon",fn:function({item:n}){return[t.markForDeletionArr.indexOf(n.effectiveId)>-1?e("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.markForDeletionSet.delete(n.effectiveId),t.markForDeletionArr=Array.from(t.markForDeletionSet)}}},[t._v(" mdi-refresh ")]):e("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.markForDeletionSet.add(n.effectiveId),t.markForDeletionArr=Array.from(t.markForDeletionSet)}}},[t._v(" mdi-trash-can ")])]}}])}),e("v-overlay",{attrs:{opacity:"0.975",value:!!t.overlayId}},[t.overlayContent?e("div",{staticStyle:{overflow:"auto","max-height":"95vh"}},[t.overlayContent.title?e("h3",[t._v(t._s(t.overlayContent.title))]):e("h3",[t._v("(No Title)")]),e("p",{staticStyle:{opacity:"0.5"}},[t._v(t._s(t.overlayContent.effectiveId))]),e("v-textarea",{attrs:{"auto-grow":"",readonly:!0,outlined:""},model:{value:t.overlayContent.content,callback:function(e){t.$set(t.overlayContent,"content",e)},expression:"overlayContent.content"}}),t.overlayContent.fileName?e("a",{attrs:{href:t.computeDownloadHref(t.overlayContent.effectiveId)}},[t._v(" "+t._s(t.overlayContent.fileName)+" ("+t._s(t.overlayContent.fileSize)+"B)")]):t._e(),e("p",{staticStyle:{opacity:"0.75"}},[t._v("Submitted "+t._s(t.overlayContent.created)+" by "+t._s(t.overlayContent.submitter)+" via "+t._s(t.overlayContent.receivedFrom))])],1):e("h3",[t._v("Loading "+t._s(t.overlayId)+"...")]),e("v-btn",{on:{click:function(e){t.overlayId=null}}},[t._v("Close")])],1)],1)},r=[],i=(n(8111),n(1701),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(7635),n(7963)),a=n(3020),c={components:{Notifications:a.A},mixins:[i.A],data:()=>({data:[],totalItems:0,headers:[{text:"",value:"viewIcon"},{text:"Title",value:"title"},{text:"Content",value:"content"},{text:"File Name",value:"fileName"},{text:"File Size",value:"fileSize"},{text:"Created",value:"created"},{text:"Submitter",value:"submitter"},{text:"Received From",value:"receivedFrom"},{text:"",value:"deleteIcon"}],page:1,itemsPerPage:7,markForDeletionSet:new Set,markForDeletionArr:[],overlayId:null,overlayContent:null}),watch:{itemsPerPage(){this.loadContactMessages()},page(){this.loadContactMessages()},overlayId(){this.overlayId?this.credentialedAxios("loading full contact message",t=>t.get(this.$apiUrl+"/contact-admin/full/"+this.overlayId),t=>this.overlayContent=t):this.overlayContent=null}},methods:{countContactMessages(){this.credentialedAxios("counting contact messages",t=>t.get(this.$apiUrl+"/contact-admin/count"),t=>this.totalItems=t)},loadContactMessages(){this.credentialedAxios("loading contact messages",t=>t.get(this.$apiUrl+"/contact-admin?page="+this.page+"&size="+this.itemsPerPage),t=>this.data=t)},computeDownloadHref(t){return this.$apiUrl+"/contact-admin/download/"+t},itemClass(t){return this.markForDeletionSet.has(t.effectiveId)?"markedForDeletion":""},clearSelection(){this.markForDeletionSet=new Set,this.markForDeletionArr=[]},deleteSelected(){console.log("Sending for deletion",this.markForDeletionArr),this.credentialedAxios("deleting contact messages",t=>t.delete(this.$apiUrl+"/contact-admin?"+this.markForDeletionArr.map(t=>"effectiveId="+encodeURIComponent(t)).join("&")),()=>{this.clearSelection(),this.countContactMessages(),this.loadContactMessages()})}},mounted(){this.countContactMessages(),this.loadContactMessages()}},l=c,s=n(845),u=(0,s.A)(l,o,r,!1,null,null,null),f=u.exports},2211:function(t,e,n){var o=n(9039);t.exports=!o(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2360:function(t,e,n){var o,r=n(8551),i=n(6801),a=n(8727),c=n(421),l=n(397),s=n(4055),u=n(6119),f=">",d="<",v="prototype",p="script",m=u("IE_PROTO"),h=function(){},y=function(t){return d+p+f+t+d+"/"+p+f},g=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=s("iframe"),n="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},x=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&o?g(o):_():g(o);var t=a.length;while(t--)delete x[v][a[t]];return x()};c[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h[v]=r(t),n=new h,h[v]=null,n[m]=t):n=x(),void 0===e?n:i.f(n,e)}},2787:function(t,e,n){var o=n(9297),r=n(4901),i=n(8981),a=n(6119),c=n(2211),l=a("IE_PROTO"),s=Object,u=s.prototype;t.exports=c?s.getPrototypeOf:function(t){var e=i(t);if(o(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof s?u:null}},3020:function(t,e,n){n.d(e,{A:function(){return s}});var o=function(){var t=this,e=t._self._c;return e("div",{class:{"alerts-outer-floating":t.floating}},t._l(t.alerts,function(n,o){return e("v-alert",{key:o,attrs:{elevation:"7",type:n.type},on:{click:function(e){return t.$delete(t.alerts,o)}}},[t._v(" "+t._s(n.text)+" ")])}),1)},r=[],i={name:"Notifications",props:["alerts","floating"]},a=i,c=n(845),l=(0,c.A)(a,o,r,!1,null,null,null),s=l.exports},4549:function(t,e,n){var o=n(4576);t.exports=function(t,e){var n=o.Iterator,r=n&&n.prototype,i=r&&r[t],a=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(c){c instanceof e||(a=!1)}if(!a)return i}},4659:function(t,e,n){var o=n(3724),r=n(4913),i=n(6980);t.exports=function(t,e,n){o?r.f(t,e,i(0,n)):t[e]=n}},6801:function(t,e,n){var o=n(3724),r=n(8686),i=n(4913),a=n(8551),c=n(5397),l=n(1072);e.f=o&&!r?Object.defineProperties:function(t,e){a(t);var n,o=c(e),r=l(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],o[n]);return t}},7657:function(t,e,n){var o,r,i,a=n(9039),c=n(4901),l=n(34),s=n(2360),u=n(2787),f=n(6840),d=n(8227),v=n(6395),p=d("iterator"),m=!1;[].keys&&(i=[].keys(),"next"in i?(r=u(u(i)),r!==Object.prototype&&(o=r)):m=!0);var h=!l(o)||a(function(){var t={};return o[p].call(t)!==t});h?o={}:v&&(o=s(o)),c(o[p])||f(o,p,function(){return this}),t.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:m}},8111:function(t,e,n){var o=n(6518),r=n(4576),i=n(679),a=n(8551),c=n(4901),l=n(2787),s=n(2106),u=n(4659),f=n(9039),d=n(9297),v=n(8227),p=n(7657).IteratorPrototype,m=n(3724),h=n(6395),y="constructor",g="Iterator",_=v("toStringTag"),x=TypeError,C=r[g],k=h||!c(C)||C.prototype!==p||!f(function(){C({})}),w=function(){if(i(this,p),l(this)===p)throw new x("Abstract class Iterator not directly constructable")},I=function(t,e){m?s(p,t,{configurable:!0,get:function(){return e},set:function(e){if(a(this),this===p)throw new x("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):p[t]=e};d(p,_)||I(_,g),!k&&d(p,y)&&p[y]!==Object||I(y,w),w.prototype=p,o({global:!0,constructor:!0,forced:k},{Iterator:w})},9539:function(t,e,n){var o=n(9565),r=n(8551),i=n(5966);t.exports=function(t,e,n){var a,c;r(t);try{if(a=i(t,"return"),!a){if("throw"===e)throw n;return n}a=o(a,t)}catch(l){c=!0,a=l}if("throw"===e)throw n;if(c)throw a;return r(a),n}}}]);
//# sourceMappingURL=471.a213c932.js.map