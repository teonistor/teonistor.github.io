"use strict";(self["webpackChunkpersonal_website_frontend"]=self["webpackChunkpersonal_website_frontend"]||[]).push([[406],{8406:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var s=function(){var e=this,t=e._self._c;return t("div",[t("v-tabs",{attrs:{grow:""},on:{change:e.showNeither},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("v-tab",{key:"upload"},[e._v(" Upload entry files ")]),t("v-tab",{key:"edit"},[e._v(" Edit collections ")])],1),t("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("v-tab-item",{key:"upload"},[t("LiteratureAdminUpload",{on:{"show-error":e.showError,"show-ok":e.showOk,"show-neither":e.showNeither}})],1),t("v-tab-item",{key:"edit"},[t("LiteratureAdminEdit",{on:{"show-error":e.showError,"show-ok":e.showOk,"show-neither":e.showNeither}})],1)],1),t("v-container",[t("v-alert",{attrs:{type:"success",border:"right",color:"#050",dismissible:""},model:{value:e.okShown,callback:function(t){e.okShown=t},expression:"okShown"}},[e._v(" OK ")]),t("v-alert",{attrs:{type:"error",border:"right",color:"purple",dismissible:""},model:{value:e.errorShown,callback:function(t){e.errorShown=t},expression:"errorShown"}},[e._v(" "+e._s(e.errorMessage)+" ")])],1)],1)},l=[],a=function(){var e=this,t=e._self._c;return t("v-container",[t("h3",[e._v("Creare conținut")]),t("v-row",[t("v-col",{attrs:{cols:"6"}},[t("v-file-input",{ref:"abcde",attrs:{"small-chips":"",multiple:"",label:"Alege"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),t("v-col",{attrs:{cols:"6"}},[t("v-row",[t("v-checkbox",{staticClass:"mr-2",attrs:{"hide-details":"",label:"Spargere pe prima categorie de titluri"},model:{value:e.splitByHeading,callback:function(t){e.splitByHeading=t},expression:"splitByHeading"}})],1),t("v-row",[t("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:"","hide-details":""},model:{value:e.createCollection,callback:function(t){e.createCollection=t},expression:"createCollection"}}),t("v-text-field",{attrs:{label:"Creare sau adăugare la colecție"},model:{value:e.collectionTitle,callback:function(t){e.collectionTitle=t},expression:"collectionTitle"}})],1),t("v-row",[t("v-combobox",{attrs:{items:e.literatureCategories,"hide-details":"",label:"Categorie"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),t("v-row",[t("v-select",{attrs:{items:e.accessLevels,label:"Acces listare"},model:{value:e.listAccess,callback:function(t){e.listAccess=t},expression:"listAccess"}})],1),t("v-row",[t("v-select",{attrs:{items:e.accessLevels,label:"Acces citire"},model:{value:e.readAccess,callback:function(t){e.readAccess=t},expression:"readAccess"}})],1)],1)],1),t("v-row",[t("v-btn",{staticStyle:{width:"75%",margin:"auto"},on:{click:function(t){return e.upload()}}},[e._v(" Dă-i bice ")])],1)],1)},i=[],r=o(4335),n={name:"LiteratureAdminUpload",data:()=>({files:[],splitByHeading:!1,category:"",collectionTitle:"",listAccess:"READER",readAccess:"ADMIN"}),computed:{accessLevels(){return["READER","USER","ADMIN"]},createCollection(){return!!this.collectionTitle},literatureCategories(){return window.globals.literatureCategories}},methods:{upload(){if(this.$emit("show-neither"),this.files&&this.files.length){let e=new FormData;for(let t of this.files)e.append("files",t,t.name);e.append("splitByHeading",this.splitByHeading),e.append("category",this.category),e.append("collectionTitle",this.collectionTitle),e.append("listAccess",this.listAccess),e.append("readAccess",this.readAccess),(0,r.A)({method:"POST",url:this.$apiUrl+"/l/upload",data:e,maxRedirects:0}).then(e=>{this.$emit("show-ok")}).catch(e=>{this.$emit("show-error",e)})}else this.$emit("show-error","Please select files.")}}},c=n,h=o(845),d=(0,h.A)(c,a,i,!1,null,null,null),p=d.exports,u=function(){var e=this,t=e._self._c;return t("v-container",[t("v-text-field",{attrs:{label:"Category"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),t("v-text-field",{attrs:{label:"Collection"},model:{value:e.collection,callback:function(t){e.collection=t},expression:"collection"}}),t("v-row",[t("v-col",{attrs:{cols:"3"}}),t("v-col",{attrs:{cols:"6"}},[t("v-btn",{attrs:{disabled:!!e.whatsHappening,loading:"loading"===e.whatsHappening,block:""},on:{click:function(t){return e.load()}}},[e._v(" Load ")])],1)],1),t("v-textarea",{attrs:{placeholder:"Collection JSON","auto-grow":"",outlined:""},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}}),t("v-row",[t("v-col",{attrs:{cols:"3"}}),t("v-col",{attrs:{cols:"6"}},[t("v-btn",{attrs:{disabled:!!e.whatsHappening,loading:"saving"===e.whatsHappening,block:""},on:{click:function(t){return e.save()}}},[e._v(" Save ")])],1)],1)],1)},v=[],w={data:()=>({category:"",collection:"",json:"",whatsHappening:""}),methods:{load(){this.whatsHappening="loading",this.$emit("show-neither"),(0,r.A)({method:"GET",url:this.$apiUrl+"/l/collection/"+encodeURIComponent(this.category)+"/"+encodeURIComponent(this.collection)}).then(e=>{this.whatsHappening="",this.json=e.data.d},e=>{this.whatsHappening="",this.$emit("show-error",e)})},save(){this.whatsHappening="saving",this.$emit("show-neither");let e=new FormData;e.set("d",this.json),(0,r.A)({method:"POST",url:this.$apiUrl+"/l/collection",data:e}).then(e=>{this.whatsHappening="",this.$emit("show-ok")},e=>{this.whatsHappening="",this.$emit("show-error",e)})}}},m=w,b=(0,h.A)(m,u,v,!1,null,null,null),g=b.exports,f={components:{LiteratureAdminUpload:p,LiteratureAdminEdit:g},data:()=>({tab:"",errorMessage:"Busted!",errorShown:!1,okShown:!1}),methods:{showError(e){this.errorMessage=e.response&&e.response.data&&e.response.data.message||e,this.errorShown=!0},showOk(){this.okShown=!0},showNeither(){this.errorShown=!1,this.okShown=!1}}},k=f,A=(0,h.A)(k,s,l,!1,null,null,null),y=A.exports}}]);
//# sourceMappingURL=406.adfd1c7e.js.map